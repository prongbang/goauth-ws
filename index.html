<html>
<div>
    <h2>Authorization Socket.IO with JWT Example</h2>
    <pre id="output"></pre>
</div>
<script>
    let output = document.getElementById("output");

    const token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c";
    
    let socket = new WebSocket("ws://localhost:8080/device?token=" + token);

    socket.onopen = function () {
        output.innerHTML += "Connected\n";
    };

    socket.onmessage = function (e) {
        if (e.data instanceof Blob) {
            e.data.text().then((text)=> {
                output.innerHTML += "\nServer: " + text + "\n";
            });
        } else {
            output.innerHTML += "\nServer: " + e.data + "\n";
        }
    };

    function send() {
        socket.send(input.value);
        input.value = "";
    }
</script>

</html>